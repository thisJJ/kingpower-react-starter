{"version":3,"file":"0.18d0dbbd69f92bd170af.hot-update.js","sources":["webpack:///src/server.js"],"sourcesContent":["import React from 'react';\nimport express from 'express';\nimport { render } from '@jaredpalmer/after';\nimport { Provider } from 'react-redux';\nimport routes from './routes';\nimport { renderToString } from 'react-dom/server';\n// import qs from 'qs';\nimport Document from './Document';\nimport configureStore from './store/configuredStore';\nconst assets = require(process.env.RAZZLE_ASSETS_MANIFEST);\n\nconst server = express();\nserver\n  .disable('x-powered-by')\n  .use(express.static(process.env.RAZZLE_PUBLIC_DIR))\n  .get('/*', async (req, res) => {\n    try {\n      // Read the counter from the request, if provided\n      // const params = qs.parse(req.query);\n      // console.log(req)\n      // console.log(res)\n      // const counter = parseInt(params.counter, 10) || 0;\n\n      // Compile initial state\n      const preloadedState = {};\n\n      // Create a new Redux store instance\n      const store = configureStore(preloadedState);\n\n      // Grab the initial state from our Redux store\n      const serverState = store.getState();\n\n      const customRenderer = (node) => {\n        const App = <Provider store={store}>{node}</Provider>;\n        return {\n          html: renderToString(App),\n          // Anything else you add here will be made available\n          // within document's this.props\n          // e.g a redux store...\n          serverState,\n        };\n      };\n\n      const html = await render({\n        req,\n        res,\n        routes,\n        assets,\n        document: Document,\n        customRenderer,\n      });\n      res.send(html);\n    } catch (error) {\n      res.json(error);\n    }\n  });\n\nexport default server;\n\n\n\n// WEBPACK FOOTER //\n// src/server.js"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AALA;AAOA;AACA;AA3BA;AAAA;AA6BA;AACA;AACA;AACA;AACA;AACA;AANA;AACA;AA7BA;AA4BA;AACA;AAOA;AApCA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAqCA;AACA;AAvCA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAJA;AAAA;AAAA;AAAA;AACA;AA4CA;;;;A","sourceRoot":""}